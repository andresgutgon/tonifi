{"version":3,"sources":["webpack:///./src/components/Photos/index.js","webpack:///./src/pages/fotos.js","webpack:///./src/components/Content/index.js","webpack:///./src/components/Content/index.module.scss","webpack:///./src/components/Gallery/index.js","webpack:///./src/components/Gallery/index.module.scss","webpack:///./src/components/Photos/index.module.scss"],"names":["Photos","_ref","images","pathname","pageTitle","react_default","a","createElement","Layout","metaImage","src","childImageSharp","fluid","Header","title","className","styles","intro","Content","Gallery","__webpack_require__","d","__webpack_exports__","pageQuery","ImagesPage","data","components_Photos","allPhotosJson","edges","node","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","_index_module_scss__WEBPACK_IMPORTED_MODULE_2__","_index_module_scss__WEBPACK_IMPORTED_MODULE_2___default","children","content","contentInner","propTypes","PropTypes","isRequired","module","exports","cx","cn","bind","state","imageIndex","getSrc","image","onPrev","this","props","setState","length","onNext","onClose","onClick","index","_this2","renderCell","cell","type","react__WEBPACK_IMPORTED_MODULE_3___default","emptyCell","gatsby_image__WEBPACK_IMPORTED_MODULE_5___default","imgStyle","transition","imageWrapper","alt","render","_this3","grid","rows","map","row","indexRow","key","isVisible","react_image_lightbox__WEBPACK_IMPORTED_MODULE_7___default","reactModalProps","shouldReturnFocusAfterClose","reactModalStyle","overlay","zIndex","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","rowCells","reduce","memo","lastRowIndex","lastRow","lastCellIndex","lastCell","full","push","React","Component","autobind"],"mappings":"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","file":"component---src-pages-fotos-js-b75b7e687df60a78276f.js","sourcesContent":["import React from 'react'\n\nimport Layout from '../Layout'\nimport Gallery from '../Gallery'\nimport Header from '../Header'\nimport Content from '../Content'\n\nimport styles from './index.module.scss'\n\nconst Photos = ({ images, pathname, pageTitle }) => {\n  return (\n    <Layout\n      metaImage={images[0].src.childImageSharp.fluid.src}\n      pathname={pathname}\n      pageTitle={pageTitle}\n    >\n      <Header title=\"Galeria d'imatges\">\n        <p className={styles.intro}>\n          Fotos d'espectacles i actuacions\n        </p>\n      </Header>\n      <Content>\n        <Gallery images={images} />\n      </Content>\n    </Layout>\n  )\n}\n\nexport default Photos\n","import React from 'react'\nimport { graphql } from 'gatsby'\n\nimport Photos from '../components/Photos'\n\nconst ImagesPage = ({ data }) => {\n  return (\n    <Photos\n      images={data.allPhotosJson.edges[0].node.images}\n      pathname='fotos'\n      pageTitle='Fotos'\n    />\n  )\n}\n\nexport default ImagesPage\n\nexport const pageQuery = graphql`\n  query {\n    allPhotosJson {\n      edges {\n        node {\n          images {\n            title\n            alt\n            src {\n              childImageSharp {\n                fluid(maxWidth: 1000) {\n                  ...GatsbyImageSharpFluid\n                }\n              }\n            }\n            full\n          }\n        }\n      }\n    }\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport styles from './index.module.scss'\n\nconst Content = ({ children }) => (\n  <div className={styles.content}>\n    <div className={styles.contentInner}>\n      {children}\n    </div>\n  </div>\n)\n\nContent.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nexport default Content\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"index-module--content--3DmGQ\",\"contentInner\":\"index-module--contentInner--28CwS\"};","import React from 'react'\nimport cn from 'classnames/bind'\nimport Img from 'gatsby-image'\nimport autobind from 'autobind-decorator'\nimport Lightbox from 'react-image-lightbox'\n\nimport styles from './index.module.scss'\nconst cx = cn.bind(styles)\n\nexport default class Gallery extends React.Component {\n  state = {\n    imageIndex: null\n  }\n\n  get rowCells () {\n    const { images } = this.props\n    return images.map((image, index) => ({\n      type: 'image', image, index\n    }))\n  }\n\n  get rows () {\n    const rows = this.rowCells.reduce((memo, cell) => {\n      const lastRowIndex = memo.length - 1\n      const lastRow = memo[lastRowIndex]\n      const lastCellIndex = lastRow ? lastRow.length - 1 : null\n      const lastCell = lastCellIndex !== null ? lastRow[lastCellIndex] : null\n      const isFull = cell.image.full\n\n      if (\n        !isFull &&\n          lastRow && lastRow.length < 2 &&\n          !lastCell.image.full\n      ) {\n        memo[lastRowIndex].push(cell)\n      } else {\n        memo.push([cell])\n      }\n\n      return memo\n    }, [])\n\n    // Complete last row with empty cell\n    const lastRow = rows[rows.length - 1]\n    if (lastRow.length === 2) return rows\n    const lastCellIndex = lastRow ? lastRow.length - 1 : null\n    const lastCell = lastCellIndex !== null ? lastRow[lastCellIndex] : null\n    if (lastCell.image.full) return rows\n    rows[rows.length - 1].push({ type: 'empty', index: null })\n    return rows\n  }\n\n  getSrc(image) {\n    return image.src.childImageSharp.fluid.src\n  }\n  get mainSrc () {\n    return this.getSrc(this.props.images[this.state.imageIndex])\n  }\n\n  get nextSrc () {\n    const { images } = this.props\n    const { imageIndex } = this.state\n    return this.getSrc(images[(imageIndex + 1) % images.length])\n  }\n\n  get prevSrc () {\n    const { images } = this.props\n    const { imageIndex } = this.state\n    return this.getSrc(images[(imageIndex + images.length - 1) % images.length])\n  }\n\n  @autobind\n  onPrev () {\n    const { images } = this.props\n    const { imageIndex } = this.state\n    this.setState({\n      imageIndex: (imageIndex + images.length - 1) % images.length\n    })\n  }\n\n  @autobind\n  onNext () {\n    const { images } = this.props\n    const { imageIndex } = this.state\n    this.setState({\n      imageIndex: (imageIndex + 1) % images.length\n    })\n  }\n\n  @autobind\n  onClose () {\n    this.setState({ imageIndex: null })\n  }\n\n  @autobind\n  onClick (index) {\n    return () => {\n      if (!index === null) return\n      this.setState({ imageIndex: index })\n    }\n  }\n\n  renderCell (cell) {\n    if (cell.type === 'empty') {\n      return <div className={styles.emptyCell} />\n    }\n    const image = cell.image\n    return (\n      <Img\n        imgStyle={{ transition: 'transform 400ms ease-out' }}\n        className={styles.imageWrapper}\n        title={image.title}\n        alt={image.alt}\n        fluid={image.src.childImageSharp.fluid}\n      />\n    )\n  }\n\n  render () {\n    const { imageIndex } = this.state\n\n    return (\n      <div className={styles.grid}>\n        {this.rows.map((row, indexRow) => (\n          <div\n            key={indexRow}\n            className={styles.row}\n          >\n            {row.map((cell, index) => (\n              <div\n                onClick={this.onClick(cell.index)}\n                key={`cell-${index}`}\n                className={cx('cell', { isVisible: cell.type !== 'empty' })}\n              >\n                {this.renderCell(cell)}\n              </div>\n            ))}\n          </div>\n        ))}\n        {imageIndex !== null && (\n          <Lightbox\n            reactModalProps={{\n              shouldReturnFocusAfterClose: false\n            }}\n            reactModalStyle={{ overlay: { zIndex: 3001 }}}\n            mainSrc={this.mainSrc}\n            nextSrc={this.nextSrc}\n            prevSrc={this.prevSrc}\n            onCloseRequest={this.onClose}\n            onMovePrevRequest={this.onPrev}\n            onMoveNextRequest={this.onNext}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"index-module--grid--3MKCA\",\"row\":\"index-module--row--1Qoee\",\"cell\":\"index-module--cell--3eccC\",\"isVisible\":\"index-module--isVisible--2z1hs\",\"imageWrapper\":\"index-module--imageWrapper--uHER4\",\"emptyCell\":\"index-module--emptyCell--33LPN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"intro\":\"index-module--intro--1mXgu\"};"],"sourceRoot":""}